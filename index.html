<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Control de LED</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    var accessToken = "ed2b4b082b6e7f701101ccb4b469675e45735485";
    var deviceID = "0a10aced202194944a055c30";
    var url = "https://api.particle.io/v1/devices/" + deviceID + "/led";

    function updateStatus(message) {
      document.getElementById("status").textContent = message;
    }

    function handleResponse(data) {
      var value = data.return_value;
      if (value === 1) {
        updateStatus("Estado: LED ENCENDIDO");
      } else if (value === 0) {
        updateStatus("Estado: LED APAGADO");
      } else if (value === -1) {
        updateStatus("Estado: Parámetro inválido");
      } else {
        updateStatus("Estado: Desconocido (" + value + ")");
      }
    }

    function handleError(xhr) {
      updateStatus("Error: " + xhr.status + " – " + xhr.responseText);
    }

    function switchOn() {
      $.post(url, { params: "on", access_token: accessToken })
        .done(handleResponse)
        .fail(handleError);
    }

    function switchOff() {
      $.post(url, { params: "off", access_token: accessToken })
        .done(handleResponse)
        .fail(handleError);
    }
  </script>
</head>
<body>
  <h1>Control de LED</h1>
  <button onclick="switchOn()">Encender</button>
  <button onclick="switchOff()">Apagar</button>
  <p id="status">Estado: ---</p>
</body>
</html>
